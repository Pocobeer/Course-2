<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <title>Информация о государствах</title>
        <style>
            table {
                width: 75%;
                border-collapse: collapse;
            }
            table, th, td {
                /* border: 1px solid black; */
                padding: 8px;
            }
            </style>
            </head>
            <body>
            <h1 align = "center">Пупупуп</h1>
            <div id="output"></div>
            <script src="countries.js"></script>
            <script>
            function makeTableFromCountry(country) {
                tab="<table width=75% align='center' border = '1'>";
                var k = 0;
                var displayed = false;
                for (const key in country) {
                    
                    // if (typeof country[key] === 'object') {
                    //     tab += "<tr><td colspan='2'>" + key + "</td></tr>";
                    //     tab += "<tr><td colspan='2'>" + makeTableFromCountry(country[key]) + "</td></tr>";
                    // } else {
                    //     tab += "<tr><td>" + key + "</td><td>" + country[key] + "</td></tr>";
                    // }
                    if( k < 4 && typeof country[key] === 'string') {
                        tab += "<tr><td>" + country[key] + "</td></tr>";
                        k++;
                    }
                    for (const key_1 in country) {
                        if (k==4 && typeof country[key_1] === 'number' && !displayed) {
                            tab += "<tr><td>" + country[key_1] + "</td></tr>";
                            displayed = true;
                        }
                    }

                    if (Array.isArray(country[key])) {
                        if (Array.isArray(country[key][0])) {
                            continue
                        }
                        else if (k==4 && typeof country[key][0] === 'string') {
                            tab += "<tr><td>" + country[key] + "</td></tr>";
                        }
                        
                    }
                    // if (typeof country[key] === 'object') {
                    //     tab+="<tr><td colspan='2'>" + JSON.stringify(country[key]) + "</td></tr>";
                    // }
                        // if(typeof country[key] === 'object') {
                        //     tab+="<tr><td >" + makeTableFromCountry(country[key]) + "</td></tr>";
                        // }

                    //tab += "<tr><td>" + country[key] + "</td></tr>";
                }
                tab += "</table>";
                return tab;
            }
            
            countriesTable = countries.map(makeTableFromCountry);
            outputElement = document.getElementById("output");
            
            countriesTable.forEach(function(info) {
                outputElement.innerHTML += info + "<br><br>";
            });
            </script>
            </body>
            </html>