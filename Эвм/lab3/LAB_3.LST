Turbo Assembler	 Version 4.1	    05/12/24 19:28:28	    Page 1
lab_3.asm



      1	    0000			 cseg	 segment
      2						 assume	cs:cseg,ds:cseg
      3
      4					 ; аргументы функции
      5	    0000  3F99999A 404001A3   +	 x  dd	1.2, 3.0001, 0.1, 2.99,	4.288, 6.789, 7.987, 10.021
      6		  3DCCCCCD 403F5C29   +
      7		  4089374C 40D93F7D   +
      8		  40FF9581 41205604
      9					 ; результат вычисления функции
     10	    0020  ????????		 z dd ?
     11	    0024			 beg:
     12	    0024  8C C8			     mov     ax,cs	 ;Настроить сегментные
     13	    0026  8E D8			     mov     ds,ax	 ;регистры
     14	    0028  9B DB	E3		     finit		 ;инициализировать сопроцессор
     15	    002B  9B D9	E8		     fld1		 ;загружаем максимальную погрешность
     16	    002E  BE 0000r		     lea si, [x]	 ;загружаем массив
     17					     ; Настраиваем счетчик
     18	    0031  B5 00			     mov ch, 0
     19	    0033  B1 07			     mov cl, 7
     20					     ; Сохраняем результат
     21	    0035  B7 00			     mov bh, 0;	текущий индекс
     22	    0037  B3 00			     mov bl, 0;индекс минимального числа
     23
     24	    0039			 Repeated:
     25	    0039  FE C7			     inc bh
     26	    003B  9B D9	04		     fld dword ptr [si]	 ;загрузить х
     27	    003E  83 C6	04		     add si, 4
     28	    0041  9B D9	C0		     fld     st(0)	 ;образовать копию x(i)				;st +
     29					 (0)-копия	х,st(1)-теущий х, st(2)-res
     30	    0044  9B D9	FC		     frndint		 ;Округлить до целого x1(i)			    +
     31					 ;st(0)-округленная копия х,st(1)-теущий	х, st(2)-res
     32	    0047  9B DE	E9		     fsubp   st(1),st(0) ;Вычитание вещественное с		    +
     33					 выталкиванием	    ;st(0)-до	ближайшего целового х,st +
     34					 (1)-res
     35	    004A  9B D9	E1		     fabs		 ;Модуль					       ;st	    +
     36					 (0)-модуль до ближайшего целового,st(1)-res
     37	    004D  9B D8	D1		     fcom   st(1)	 ;Сравниваем текущую масимальную	    +
     38					 погрешность	    ;st(0)-до	ближайшего целового,st(1)-res
     39					     .386
     40	    0050  9B DF	E0		     fstsw ax		 ;Записываем значения	кодов условия
     41	    0053  9E			     sahf		 ;загрузить коды во флаговый регистр
     42	    0054  77 06	90 90		     ja	    Processing	 ;если >= переходим на финальную	    +
     43					 обработку
     44	    0058			 NewEps:
     45	    0058  D9 C9			     fxch    st(1)							 ;st(0)-res,st	    +
     46					 (1)-до ближайшего целового
     47
     48	    005A  8A DF			     mov bl, bh
     49
     50	    005C			 Processing:
     51	    005C  DD D8			     fstp st(0)		    ;Уменьшаем	указатель стека  на 1
     52	    005E  E2 D9			     loop Repeated
     53	    0060			 Exit:
     54	    0060  D9 1E	0020r		     fstp    z		 ;сохранить результат
     55	    0064  B8 4C00		     mov     ax,4c00h	 ;вернуться в	DOS
     56	    0067  CD 21			     int 21h
     57	    0069			 cseg ends
Turbo Assembler	 Version 4.1	    05/12/24 19:28:28	    Page 2
lab_3.asm



     58					     end beg
Turbo Assembler	 Version 4.1	    05/12/24 19:28:28	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "05/12/24"
??FILENAME			  Text	 "lab_3	  "
??TIME				  Text	 "19:28:28"
??VERSION			  Number 040A
@CPU				  Text	 0F0FH
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 LAB_3
@WORDSIZE			  Text	 4
BEG				  Near	 CSEG:0024
EXIT				  Near	 CSEG:0060
NEWEPS				  Near	 CSEG:0058
PROCESSING			  Near	 CSEG:005C
REPEATED			  Near	 CSEG:0039
X				  Dword	 CSEG:0000
Z				  Dword	 CSEG:0020

Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  0069 Para	  none
